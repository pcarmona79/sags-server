<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
</head>
<body>
<h1>Protocolo de Red SAGS versión 2 (borrador)<br>
</h1>
<p>Es un protocolo binario que se transmite por sobre un enlace SSL
para
proveer una mayor seguridad de los datos enviados.</p>
<p>Los datos se transmiten en forma de paquetes. Este paquete consta de
una cabecera y un mensaje. La cabecera consta a su vez de un campo de
16
bits para el tipo de mensaje, otro campo de 6 bits para la secuencia
del paquete, y un último campo de 10 bits para indicar el tamaño del
mensaje. El mensaje puede o no existir dependiendo del número de
secuencia. Si este es 0, el paquete no posee un mensaje y si es mayor
indica la sencuencia dentro de una lista de paquetes.</p>
<p>Cuando se envía una lista de paquetes ésto son marcados con una
secuencia en orden descendente tomando como primer valor el número de
paquetes. El último paquete de la lista lleva la secuencia 1 (no debe
ser 0 ya que así indicaría un paquete vacío).</p>
<p>Según los campos de bits usados en la cabecera se puede conseguir un
paquete de un tamaño máximo de 1024 bytes. Usando la secuencia se
pueden enviar hasta 64 paquetes, por lo que se pueden enviar hasta 64
KB
de información usando este protocolo.</p>
<h2>Tipos de mensajes</h2>
<ol>
  <li>Mensajes de sesión<br>
    <br>
    <table style="text-align: left; height: 38px; width: 100%;"
 border="1" cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">SessionConsoleInput</td>
          <td style="vertical-align: top;">0x0001 </td>
          <td style="vertical-align: top;">Para ejecutar comandos en la
consola del proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionConsoleOutput</td>
          <td style="vertical-align: top;">0x0002</td>
          <td style="vertical-align: top;">Salida leída desde la
consola
del proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionConsoleSuccess</td>
          <td style="vertical-align: top;">0x0003</td>
          <td style="vertical-align: top;">Comando ejecutado con éxito
en
la consola del proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionConsoleNeedLogs</td>
          <td style="vertical-align: top;">0x0004</td>
          <td style="vertical-align: top;">Petición de los registros de
mensajes de la consola del proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionConsoleLogs</td>
          <td style="vertical-align: top;">0x0005</td>
          <td style="vertical-align: top;">Contiene los registros de
mensajes de la consola del proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionProcessExits</td>
          <td style="vertical-align: top;">0x0006</td>
          <td style="vertical-align: top;">Proceso ha terminado<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionProcessStart</td>
          <td style="vertical-align: top;">0x0007</td>
          <td style="vertical-align: top;">Se ha iniciado el proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionDisconnect</td>
          <td style="vertical-align: top;">0x000A</td>
          <td style="vertical-align: top;">Cliente desconectándose o
desconectado por el servidor<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SessionDrop</td>
          <td style="vertical-align: top;">0x000B</td>
          <td style="vertical-align: top;">Conexión botada por el
servidor
(no usado actualmente) </td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Mensajes de autenticación<br>
    <br>
    <table style="text-align: left; width: 100%;" border="1"
 cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">AuthUsername</td>
          <td style="vertical-align: top;">0xFD00</td>
          <td style="vertical-align: top;">Envío del nombre de usuario
por
parte del cliente<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">AuthRandomHash</td>
          <td style="vertical-align: top;">0xFD01</td>
          <td style="vertical-align: top;">Texto aleatorio para usar en
la
autenticación (no usado actualmente)<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">AuthPassword</td>
          <td style="vertical-align: top;">0xFD02</td>
          <td style="vertical-align: top;">Envío de la contraseña del
usuario (o texto de autenticación) por parte del cliente<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">AuthSuccessful</td>
          <td style="vertical-align: top;">0xFD03</td>
          <td style="vertical-align: top;">Autenticación exitosa<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Mensajes de sincronización<br>
    <br>
    <table style="text-align: left; width: 100%;" border="1"
 cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">SyncHello</td>
          <td style="vertical-align: top;">0xFE00</td>
          <td style="vertical-align: top;">Saludo enviado por el
cliente o
el servidor después de conectarse<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">SyncVersion</td>
          <td style="vertical-align: top;">0xFE01</td>
          <td style="vertical-align: top;">Contiene la versión del
protocolo usado por el cliente y el servidor<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
  </li>
  <li>Mensajes de error<br>
    <br>
Desconetan:<br>
    <br>
    <table style="text-align: left; width: 100%;" border="1"
 cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">ErrorServerFull</td>
          <td style="vertical-align: top;">0xFF00</td>
          <td style="vertical-align: top;">Servidor lleno<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">ErrorNotValidVersion</td>
          <td style="vertical-align: top;">0xFF01</td>
          <td style="vertical-align: top;">Versión no válida del
protocolo
de red usado por el cliente<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">ErrorLoginFailed</td>
          <td style="vertical-align: top;">0xFF02 </td>
          <td style="vertical-align: top;">Autenticación fallida por
nombre
de usuario o contraseña incorrecta<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">ErrorAuthTimeout</td>
          <td style="vertical-align: top;">0xFF03</td>
          <td style="vertical-align: top;">Expiró el tiempo para la
autenticación<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;"> ErrorServerQuit</td>
          <td style="vertical-align: top;">0xFF04</td>
          <td style="vertical-align: top;">Servidor está terminando y
cerrando todas las conexiones<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
No desconectan:<br>
    <br>
    <table style="text-align: left; width: 100%;" border="1"
 cellspacing="2" cellpadding="2">
      <tbody>
        <tr>
          <td style="vertical-align: top;">ErrorBadProcess</td>
          <td style="vertical-align: top;">0xFF80</td>
          <td style="vertical-align: top;">Proceso erróneo o mal
configurado<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">ErrorCantWriteToProcess</td>
          <td style="vertical-align: top;">0xFF81</td>
          <td style="vertical-align: top;">No se puedo escribir en el
proceso<br>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: top;">ErrorGeneric</td>
          <td style="vertical-align: top;">0xFFFF</td>
          <td style="vertical-align: top;">Error genérico que contiene
la
explicación en el campo Data<br>
          </td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>
<br>
</body>
</html>
